language: node_js
node_js:
  - node
before_install:
  - npm install --global npm@latest
install:
  - npm ci
cache:
  directories:
    - "$HOME/.npm"
script:
  - npm run lint
  - npm run build:prod
  - npm run test
  - npm run e2e

  - echo "//registry.npmjs.org/:_authToken=$NPM_AUTH_TOKEN" >> "$HOME/.npmrc"

  - cd dist/hippo
  - npm publish --access public

  - cd ../angular
  - npm publish --access public
